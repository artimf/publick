# --- ВИЗУАЛИЗАЦИЯ РОЛЕЙ ---
if not filtered_df.empty:
    st.subheader("Распределение ролей")

    # Подсчёт ролей
    role_counts = filtered_df['role'].value_counts()

    # Построение графика
    plt.figure(figsize=(10, 5))
    sns.set_style("whitegrid")
    sns.barplot(x=role_counts.values, y=role_counts.index, palette="viridis")

    plt.xlabel("Количество серверов")
    plt.ylabel("Роль")
    plt.title("Распределение ролей по серверам")

    st.pyplot(plt)
